{% if messages %}
<div id="messages-container" class="space-y-3 mb-6">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }} animate-fade-in"
         role="alert"
         data-message-id="msg-{{ forloop.counter }}"
         style="animation: slideInDown 0.3s ease-out;">
        
        <div class="flex items-start gap-3 p-4 rounded-lg border-l-4
                    {% if message.tags == 'success' %}
                        bg-green-50 dark:bg-green-900/20 border-green-500 text-green-800 dark:text-green-200
                    {% elif message.tags == 'error' %}
                        bg-red-50 dark:bg-red-900/20 border-red-500 text-red-800 dark:text-red-200
                    {% elif message.tags == 'warning' %}
                        bg-yellow-50 dark:bg-yellow-900/20 border-yellow-500 text-yellow-800 dark:text-yellow-200
                    {% else %}
                        bg-blue-50 dark:bg-blue-900/20 border-blue-500 text-blue-800 dark:text-blue-200
                    {% endif %}">
            
            <!-- Icon -->
            <div class="flex-shrink-0 pt-0.5">
                {% if message.tags == 'success' %}
                    <i class="fas fa-check-circle text-lg"></i>
                {% elif message.tags == 'error' %}
                    <i class="fas fa-exclamation-circle text-lg"></i>
                {% elif message.tags == 'warning' %}
                    <i class="fas fa-exclamation-triangle text-lg"></i>
                {% else %}
                    <i class="fas fa-info-circle text-lg"></i>
                {% endif %}
            </div>
            
            <!-- Message Text -->
            <div class="flex-1">
                <p class="font-semibold text-sm sm:text-base">
                    {% if message.tags == 'success' %}
                        Succ√®s
                    {% elif message.tags == 'error' %}
                        Erreur
                    {% elif message.tags == 'warning' %}
                        Avertissement
                    {% else %}
                        Information
                    {% endif %}
                </p>
                <p class="text-sm mt-1">{{ message }}</p>
            </div>
            
            <!-- Close Button -->
            <button type="button"
                    class="flex-shrink-0 text-current opacity-50 hover:opacity-100 transition-opacity"
                    onclick="document.getElementById('msg-{{ forloop.counter }}').parentElement.remove();"
                    aria-label="Fermer le message">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>
    {% endfor %}
</div>

<style>
@keyframes slideInDown {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes fadeOut {
    from {
        opacity: 1;
        transform: translateY(0);
    }
    to {
        opacity: 0;
        transform: translateY(-20px);
    }
}

.animate-fade-in {
    animation: slideInDown 0.3s ease-out;
}

/* Auto-dismiss messages after 5 seconds */
.alert {
    animation: slideInDown 0.3s ease-out;
}
</style>

<script>
// Auto-dismiss messages after 5 seconds, except errors
document.addEventListener('DOMContentLoaded', function() {
    const messages = document.querySelectorAll('.alert');
    messages.forEach((msg) => {
        if (!msg.classList.contains('alert-error') && !msg.classList.contains('alert-warning')) {
            setTimeout(() => {
                msg.style.animation = 'fadeOut 0.3s ease-in forwards';
                setTimeout(() => {
                    msg.remove();
                }, 300);
            }, 5000);
        }
    });
});
</script>
{% endif %}
